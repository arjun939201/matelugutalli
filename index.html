<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Dictionary - Main Page</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <style>
    body {
      font-family: Arial, sans-serif;
      background: #f9f9f9;
      margin: 0;
      padding: 20px;
      display: flex;
      flex-direction: column;
      align-items: center;
    }
    h1 { color: #333; margin-bottom: 20px; }

    /* Search Section */
    .search-box {
      width: 90%;
      max-width: 600px;
      text-align: center;
      margin-bottom: 20px;
    }
    input[type="text"] {
      width: 70%;
      padding: 10px;
      font-size: 16px;
    }
    button {
      padding: 10px 15px;
      font-size: 16px;
      cursor: pointer;
      background: #007bff;
      color: #fff;
      border: none;
      border-radius: 5px;
    }
    button:hover { background: #0056b3; }
.button-row {
  display: flex;           /* Arrange children in a row */
  justify-content: space-around; /* Evenly space buttons */
  gap: 10px;               /* Optional spacing between buttons */
}

.read-btn {
  padding: auto;      /* Adjust button size */
  font-size: 16px;
  cursor: pointer;
}
    
    /* Results + Random Word */
    .result-box, .random-box {
      width: 90%;
      max-width: 600px;
      min-height: 120px;
      margin-top: 15px;
      padding: 20px;
      border: 1px solid #ddd;
      background: #fff;
      border-radius: 10px;
      text-align: left;
      box-sizing: border-box;
    }
    .box-title {
      font-weight: bold;
      margin-bottom: 10px;
      color: #444;
    }
    .result-entry {
      margin-bottom: 8px;
      padding: 8px;
      border-bottom: 1px solid #eee;
    }
    .category-label {
      font-size: 13px;
      font-weight: bold;
      color: #555;
      background: #f0f0f0;
      padding: 2px 6px;
      border-radius: 5px;
      margin-left: 5px;
    }

    .nav-buttons {
      margin-top: 10px;
      display: flex;
      justify-content: space-between;
    }
    .nav-buttons button {
      flex: 1;
      margin: 0 5px;
      background: #28a745;
    }
    .nav-buttons button:hover { background: #1e7e34; }

    /* Read Button */
    .read-btn {
      margin-top: 30px;
      padding: 12px 20px;
      font-size: 18px;
      background: #6c63ff;
      color: #fff;
      border: none;
      border-radius: 8px;
      cursor: pointer;
    }
    .read-btn:hover { background: #5147d8; }
  .vocab-box {
  width: 90%;
  max-width: 600px;
  min-height: 120px;
  margin-top: 15px;
  padding: 20px;
  border: 1px solid #ddd;
  background: #fff;
  border-radius: 10px;
  text-align: left;
  box-sizing: border-box;
  }
 
   .result-box, .random-box, .vocab-box {
  word-break: break-all;
  white-space: pre-line; /* preserves line breaks, but still wraps */
  overflow-x: auto;    /* hides any possible overflow */
    }
    section h1 {
 font-size: 5px;
    }
  </style>
</head>
<body>
  <h1>üìñ ‡∞§‡±Ü‡∞≤‡±Å‡∞ó‡±Å ‡∞§‡±Ü‡∞≤‡±ç‡∞≤‡∞°‡∞ø </h1>

  <!-- Search -->
  <div class="search-box">
    <input type="text" id="searchInput" placeholder="‡∞è‡∞¶‡±à‡∞®‡∞æ ‡∞µ‡±Ü‡∞§‡∞ï‡∞Ç‡∞°‡∞ø...">
    <button onclick="searchWord()">‡∞µ‡±Ü‡∞§‡±Å‡∞ï‡±Å</button>
  </div>

  <!-- Search Result -->
  <div class="result-box">
    <div class="box-title">üîé ‡∞µ‡±Ü‡∞§‡±Å‡∞ï‡±Å ‡∞™‡∞Ç‡∞ü‡∞ï‡∞æ‡∞≤‡±Å</div>
    <div id="searchResult">‡∞á‡∞Ç‡∞ï‡∞æ ‡∞µ‡±Ü‡∞§‡∞ï‡∞≤‡±á‡∞¶‡±Å.</div>
  </div>

  <!-- Random Word -->
  <div class="random-box">
    <div class="box-title">üé≤ ‡∞Æ‡±Ä‡∞ï‡±ã‡∞∏‡∞Ç</div>
    <div id="randomWord">‡∞§‡±Ü‡∞∏‡±ç‡∞§‡±Å‡∞®‡±ç‡∞®‡∞æ...</div>
    <div class="nav-buttons">
      <button onclick="prevWord()">‚Üê ‡∞µ‡±Ü‡∞®‡∞ï‡∞¶‡∞ø</button>
      <button onclick="nextWord()">‡∞§‡∞∞‡±ç‡∞µ‡∞æ‡∞§‡∞¶‡∞ø‚Üí</button>
    </div>
  </div>

    <!-- Vocabulary Section -->
  <div class="vocab-box">
    <div class="box-title">üóÇÔ∏è ‡∞Æ‡∞æ‡∞ü‡±ã‡∞≤‡∞ø (vocabulary)</div>
    <div id="vocabContent">‡∞§‡±Ü‡∞∏‡±ç‡∞§‡±Å‡∞®‡±ç‡∞®...</div>
    <div class="nav-buttons">
      <button onclick="prevVocab()">‚Üê ‡∞µ‡±Ü‡∞®‡∞ï‡∞¶‡∞ø</button>
      <button onclick="nextVocab()">‡∞§‡∞∞‡±ç‡∞µ‡∞æ‡∞§‡∞¶‡∞ø‚Üí</button>
    </div>
  </div>
  
  <div class="button-row">
  <button class="read-btn" onclick="window.location.href='read.html'">‡∞ö‡∞¶‡±Å‡∞µ‡±Å</button>
  <button class="read-btn" onclick="window.location.href='games.html'">‡∞Ü‡∞ü‡∞≤‡±Å</button>
  <button class="read-btn" onclick="window.location.href='neologism.html'">‡∞ï‡±ä‡∞§‡±ç‡∞§‡∞Æ‡∞æ‡∞ü‡∞ï‡∞ü‡±ç‡∞≤‡±Å</button>
</div>

  <script>
  let dictionary = [];
  let currentIndex = 0;

  // For Vocabulary (grouped by category field)
  let vocabCategories = {};
  let vocabKeys = [];
  let vocabIndex = 0;

  // Load dictionary
  async function loadDictionary() {
    try {
      let res = await fetch("dictionary.txt");
      dictionary = await res.json();

      prepareVocabCategories();

      // Show first displays
      showRandomWord();
      showVocab();
    } catch (err) {
      console.error("Error loading dictionary:", err);
    }
  }

  // üîé Search
  function searchWord() {
    let query = document.getElementById("searchInput").value.toLowerCase();
    let resultBox = document.getElementById("searchResult");

    if (!query) {
      resultBox.innerHTML = "‡∞è‡∞¶‡±à‡∞®‡∞æ ‡∞µ‡±ç‡∞∞‡∞æ‡∞Ø‡∞Ç‡∞°‡∞ø...";
      return;
    }

    let results = dictionary.filter(
      entry =>
        entry.word.toLowerCase().includes(query) ||
        entry.equivalent.toLowerCase().includes(query) ||
        entry.meaning.toLowerCase().includes(query) ||
        (entry.category && entry.category.toLowerCase().includes(query))
    );

    if (results.length > 0) {
      resultBox.innerHTML = results
        .map(
          e => `
          <div class="result-entry">
            <b>${e.word}</b> (${e.grammar})
            <br>üí° ${e.equivalent}
            <br>üìñ ${e.meaning}
            <br><span class="category-label">${e.category || e.grammar}</span>
          </div>`
        )
        .join("");
    } else {
      resultBox.innerHTML = "‚ùå ‡∞à ‡∞™‡∞¶‡∞Ç ‡∞¶‡±ä‡∞∞‡∞ï‡∞≤‡±á‡∞¶‡±Å.";
    }
  }

  // üé≤ Random Word
  function showRandomWord() {
    if (dictionary.length === 0) {
      document.getElementById("randomWord").innerText = "No words available.";
      return;
    }
    let e = dictionary[currentIndex];
    document.getElementById("randomWord").innerHTML = `
      <b>${e.word}</b> (${e.grammar})
      <br>üí° ${e.equivalent}
      <br>üìñ ${e.meaning}
      <br><span class="category-label">${e.category || e.grammar}</span>
    `;
  }

  function nextWord() {
    if (dictionary.length > 0) {
      currentIndex = (currentIndex + 1) % dictionary.length;
      showRandomWord();
    }
  }

  function prevWord() {
    if (dictionary.length > 0) {
      currentIndex = (currentIndex - 1 + dictionary.length) % dictionary.length;
      showRandomWord();
    }
  }

  // üóÇÔ∏è Vocabulary
  function prepareVocabCategories() {
    vocabCategories = {};
    dictionary.forEach(entry => {
      let cat = entry.category || entry.grammar; // fallback
      if (!vocabCategories[cat]) {
        vocabCategories[cat] = [];
      }
      vocabCategories[cat].push(entry);
    });
    vocabKeys = Object.keys(vocabCategories);
  }

  function showVocab() {
    if (vocabKeys.length === 0) {
      document.getElementById("vocabContent").innerText = "‡∞è‡∞Æ‡∞ø‡∞≤‡±á‡∞µ‡±ÅüôÉ";
      return;
    }
    let category = vocabKeys[vocabIndex];
    let words = vocabCategories[category];
    document.getElementById("vocabContent").innerHTML = `
      <b>${category}</b> (${words.length} ‡∞™‡∞¶‡∞æ‡∞≤‡±Å)
      <ul>
        ${words
          .map(
            e =>
              `<li><b>${e.word}</b> ‚Äì ${e.equivalent} <br><small>${e.meaning}</small></li>`
          )
          .join("")}
      </ul>
    `;
  }

  function nextVocab() {
    if (vocabKeys.length > 0) {
      vocabIndex = (vocabIndex + 1) % vocabKeys.length;
      showVocab();
    }
  }

  function prevVocab() {
    if (vocabKeys.length > 0) {
      vocabIndex = (vocabIndex - 1 + vocabKeys.length) % vocabKeys.length;
      showVocab();
    }
  }

  // Load on startup
  loadDictionary();
</script>
</body>
</html>
